#!/usr/bin/env ruby
require_relative("../lib/player")
require_relative("../lib/board")
require_relative("../lib/logic")

class Game
  puts "Welcome to Ruby's tic tac toe \u{1F600}"
  puts
  puts "Enter first player name:"
  player1 = gets.chomp.capitalize

  until Board.validate_name(player1)
    puts "Name is too short, please try again"
    player1 = gets.chomp.capitalize
  end

  puts "Enter second player name:"
  player2 = gets.chomp.capitalize

  until Board.validate_name(player2)
    puts "Name is too short,please try again"
    player2 = gets.chomp.capitalize
  end

  star = "\u{2B50}"
  droplet = "\u{1F4A7}"

  first_player = Player.new(player1, star)
  second_player = Player.new(player2, droplet)

  puts
  puts "#{first_player.name} will play with #{first_player.sign}
and #{second_player.name} will play with #{second_player.sign}"
  puts
  puts "Let's Start!"
  puts

  arr = [1, 2, 3, 4, 5, 6, 7, 8, 9]

  def board
    puts "+---+---+---+"
    puts "| #{arr[0]} | #{arr[1]} | #{arr[2]} |"
    puts "+---+---+---+"
    puts "| #{arr[3]} | #{arr[4]} | #{arr[5]} |"
    puts "+---+---+---+"
    puts "| #{arr[6]} | #{arr[7]} | #{arr[8]} |"
    puts "+---+---+---+"
    puts
  end

  def turn
    board
    puts "It is #{first_player.name}'s turn"
  end

  puts

  puts "Please select an available cell number"
  selected_cell = gets.chomp.to_i
  if arr.include?(selected_cell)
    puts "Now it is #{second_player.name}'s turn"
    puts
  else
    puts "Please select an available cell number"
    selected_cell = gets.chomp.to_i
  end
  puts "Invalid move, please enter a number from 1 to 9" if selected_cell > 9

  puts "It's a TIE"
  puts
  puts "Game over"
  puts
  puts "The Winner is #{second_player.name} \u{1f973} \u{1F389}"
  puts
  puts "Good luck next time #{second_player.name} \u{1f609}"
end
